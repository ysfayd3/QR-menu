<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leanor Cafe - Men√º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="sync-config.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        * { font-family: 'Poppins', sans-serif; }
        html { scroll-behavior: smooth; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="fixed inset-0 z-50 gradient-bg flex items-center justify-center">
        <div class="text-center px-6">
            <div class="mb-8">
                <div class="w-24 h-24 mx-auto bg-white/20 backdrop-blur-lg rounded-3xl flex items-center justify-center shadow-2xl">
                    <svg class="w-14 h-14 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
            </div>
            <h1 class="text-5xl font-bold text-white mb-3" id="cafe-name-welcome">Leanor Cafe</h1>
            <p class="text-xl text-white/90 mb-12" id="cafe-tagline-welcome">Lezzetin ve Keyifin Adresi</p>
            <button onclick="enterMenu()" class="px-10 py-4 bg-white text-purple-600 rounded-full font-semibold text-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300">
                Men√ºy√º Ke≈üfet
            </button>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu" class="hidden min-h-screen">
        <!-- Header -->
        <header class="gradient-bg text-white shadow-lg p-6 text-center">
            <h1 class="text-3xl font-bold mb-1" id="cafe-name">Leanor Cafe</h1>
            <p class="text-sm text-white/90" id="cafe-tagline">Lezzetin ve Keyifin Adresi</p>
        </header>

        <!-- Categories -->
        <div class="bg-white shadow-md p-4">
            <div id="categories" class="flex gap-2 overflow-x-auto pb-2"></div>
        </div>

        <!-- Products -->
        <main class="container mx-auto px-4 py-6">
            <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            <div id="empty-state" class="hidden text-center py-20">
                <p class="text-gray-400 text-lg">√úr√ºn bulunamadƒ±</p>
            </div>
        </main>
    </div>

    <script>
        let menuData = [];
        let categories = [];
        let settings = {};
        let currentCategory = 'all';

        // VARSAYILAN MEN√ú - Yeni cihazlarda otomatik y√ºklenir
        const DEFAULT_MENU = {
            settings: {
                cafeName: "Leanor Cafe",
                tagline: "Lezzetin ve Keyifin Adresi"
            },
            categories: [
                { id: "nargile", name: "Nargile", icon: "ü™î" },
                { id: "sicak", name: "Sƒ±cak ƒ∞√ßecekler", icon: "‚òï" },
                { id: "soguk", name: "Soƒüuk ƒ∞√ßecekler", icon: "üßÉ" },
                { id: "yemek", name: "Yemekler", icon: "üçΩÔ∏è" },
                { id: "tatli", name: "Tatlƒ±lar", icon: "üç∞" }
            ],
            products: [
                { id: 1, name: "T√ºrk Kahvesi", category: "sicak", price: "45‚Ç∫", image: "", description: "Geleneksel y√∂ntemle hazƒ±rlanan T√ºrk kahvesi", details: { ingredients: "√ñzel √ßekilmi≈ü T√ºrk kahvesi", serving: "Fincan", calories: "~5 kcal" } },
                { id: 2, name: "Cappuccino", category: "sicak", price: "55‚Ç∫", image: "", description: "S√ºtl√º k√∂p√ºkl√º ƒ∞talyan kahvesi", details: { ingredients: "Espresso, s√ºt k√∂p√ºƒü√º, tar√ßƒ±n", serving: "Orta boy fincan", calories: "~120 kcal" } },
                { id: 3, name: "Latte", category: "sicak", price: "55‚Ç∫", image: "", description: "S√ºtl√º espresso kahve", details: { ingredients: "Espresso, buharda ƒ±sƒ±tƒ±lmƒ±≈ü s√ºt", serving: "B√ºy√ºk fincan", calories: "~150 kcal" } },
                { id: 4, name: "Sƒ±cak √áikolata", category: "sicak", price: "50‚Ç∫", image: "", description: "Yoƒüun Bel√ßika √ßikolatasƒ±", details: { ingredients: "Bel√ßika √ßikolatasƒ±, s√ºt, krema", serving: "Orta boy fincan", calories: "~250 kcal" } },
                { id: 5, name: "√áay", category: "sicak", price: "20‚Ç∫", image: "", description: "Geleneksel demleme √ßay", details: { ingredients: "√ñzel demlik √ßayƒ±", serving: "ƒ∞nce belli bardak", calories: "~2 kcal" } },
                { id: 6, name: "Limonata", category: "soguk", price: "45‚Ç∫", image: "", description: "Taze sƒ±kƒ±lmƒ±≈ü limonata", details: { ingredients: "Taze limon, nane, ≈üeker", serving: "B√ºy√ºk bardak", calories: "~120 kcal" } },
                { id: 7, name: "Ice Latte", category: "soguk", price: "60‚Ç∫", image: "", description: "Buzlu s√ºtl√º kahve", details: { ingredients: "Espresso, soƒüuk s√ºt, buz", serving: "B√ºy√ºk bardak", calories: "~180 kcal" } },
                { id: 8, name: "Milkshake", category: "soguk", price: "65‚Ç∫", image: "", description: "√áikolata, vanilya veya √ßilek", details: { ingredients: "Dondurma, s√ºt, aroma", serving: "B√ºy√ºk bardak", calories: "~350 kcal" } },
                { id: 9, name: "Smoothie", category: "soguk", price: "55‚Ç∫", image: "", description: "Taze meyveli smoothie", details: { ingredients: "Muz, √ßilek, yaban mersini, yoƒüurt", serving: "Orta boy bardak", calories: "~200 kcal" } },
                { id: 10, name: "Soƒüuk √áay", category: "soguk", price: "35‚Ç∫", image: "", description: "≈ûeftali veya limon aromalƒ±", details: { ingredients: "√áay, meyve aromasƒ±, buz", serving: "B√ºy√ºk bardak", calories: "~80 kcal" } },
                { id: 11, name: "Elma Nargile", category: "nargile", price: "150‚Ç∫", image: "", description: "Taze elma aromasƒ± ile ferahlatƒ±cƒ± nargile keyfi", details: { ingredients: "Premium elma aromasƒ±, √∂zel nargile t√ºt√ºn√º", serving: "Tek ki≈üilik", time: "45-60 dakika" } },
                { id: 12, name: "√áilek Nargile", category: "nargile", price: "150‚Ç∫", image: "", description: "Tatlƒ± √ßilek aromasƒ± ile keyifli nargile", details: { ingredients: "Premium √ßilek aromasƒ±, √∂zel nargile t√ºt√ºn√º", serving: "Tek ki≈üilik", time: "45-60 dakika" } },
                { id: 13, name: "Nane Limon Nargile", category: "nargile", price: "160‚Ç∫", image: "", description: "Ferahlatƒ±cƒ± nane limon karƒ±≈üƒ±mƒ±", details: { ingredients: "Nane, limon aromasƒ±, premium t√ºt√ºn", serving: "Tek ki≈üilik", time: "45-60 dakika" } },
                { id: 14, name: "Serpme Kahvaltƒ±", category: "yemek", price: "180‚Ç∫", image: "", description: "2 ki≈üilik zengin serpme kahvaltƒ± tabaƒüƒ±", details: { ingredients: "Peynir √ße≈üitleri, zeytin, re√ßel, bal, kaymak, yumurta", serving: "2 ki≈üilik", calories: "~800 kcal" } },
                { id: 15, name: "Leanor Burger", category: "yemek", price: "120‚Ç∫", image: "", description: "√ñzel soslu premium hamburger", details: { ingredients: "200gr dana k√∂fte, ka≈üar, domates, marul", serving: "Patates kƒ±zartmasƒ± ile", calories: "~650 kcal" } },
                { id: 16, name: "Makarna", category: "yemek", price: "85‚Ç∫", image: "", description: "Kremalƒ± veya domates soslu", details: { ingredients: "Penne makarna, sos, parmesan", serving: "1 porsiyon", calories: "~450 kcal" } },
                { id: 17, name: "Waffle", category: "tatli", price: "80‚Ç∫", image: "", description: "Meyveli veya √ßikolatalƒ± waffle", details: { ingredients: "Waffle hamuru, meyve/√ßikolata sosu", serving: "1 porsiyon", calories: "~450 kcal" } },
                { id: 18, name: "Cheesecake", category: "tatli", price: "75‚Ç∫", image: "", description: "Orman meyveli cheesecake", details: { ingredients: "Krem peynir, bisk√ºvi, orman meyveleri", serving: "1 dilim", calories: "~380 kcal" } },
                { id: 19, name: "Brownie", category: "tatli", price: "70‚Ç∫", image: "", description: "Sƒ±cak √ßikolatalƒ± brownie", details: { ingredients: "√áikolata, ceviz, dondurma", serving: "1 porsiyon", calories: "~420 kcal" } },
                { id: 20, name: "Tiramisu", category: "tatli", price: "85‚Ç∫", image: "", description: "ƒ∞talyan klasiƒüi tiramisu", details: { ingredients: "Mascarpone, kahve, kedi dili bisk√ºvi", serving: "1 porsiyon", calories: "~400 kcal" } }
            ]
        };

        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', async () => {
            await loadMenu();
            updateUI();
        });

        // Men√ºy√º y√ºkle - OTOMATƒ∞K SENKRONƒ∞ZASYON
        async function loadMenu() {
            try {
                console.log('üîÑ Men√º y√ºkleniyor...');
                
                // 1. √ñNCE: Cloud'dan otomatik senkronize et
                if (typeof SyncManager !== 'undefined') {
                    const cloudData = await SyncManager.fetchFromCloud();
                    if (cloudData && cloudData.products && cloudData.products.length > 0) {
                        menuData = cloudData.products;
                        categories = cloudData.categories || DEFAULT_MENU.categories;
                        settings = cloudData.settings || DEFAULT_MENU.settings;
                        console.log(`‚úÖ Cloud'dan ${menuData.length} √ºr√ºn y√ºklendi (OTOMATIK)`);
                        
                        // Otomatik g√ºncellemeyi ba≈ülat
                        SyncManager.startAutoRefresh((newData) => {
                            if (newData && newData.products) {
                                menuData = newData.products;
                                categories = newData.categories || categories;
                                settings = newData.settings || settings;
                                updateUI();
                                console.log('üîÑ Men√º otomatik g√ºncellendi!');
                            }
                        });
                        
                        return;
                    }
                }
                
                // 2. SONRA: Yerel JSON dosyasƒ±ndan y√ºkle
                try {
                    const response = await fetch('menu-data.json');
                    if (response.ok) {
                        const data = await response.json();
                        menuData = data.products || [];
                        categories = data.categories || [];
                        settings = data.settings || {};
                        console.log(`‚úÖ Yerel JSON'dan ${menuData.length} √ºr√ºn y√ºklendi`);
                        return;
                    }
                } catch (error) {
                    console.log('‚ö†Ô∏è Yerel JSON dosyasƒ± bulunamadƒ±');
                }
                
                // 3. EN SON: Varsayƒ±lan men√ºy√º kullan
                menuData = DEFAULT_MENU.products;
                categories = DEFAULT_MENU.categories;
                settings = DEFAULT_MENU.settings;
                console.log(`‚úÖ Varsayƒ±lan men√º y√ºklendi: ${menuData.length} √ºr√ºn`);
                
            } catch (error) {
                console.error('‚ùå Men√º y√ºkleme hatasƒ±:', error);
                // Hata durumunda bile varsayƒ±lan men√ºy√º g√∂ster
                menuData = DEFAULT_MENU.products;
                categories = DEFAULT_MENU.categories;
                settings = DEFAULT_MENU.settings;
            }
        }

        // UI'ƒ± g√ºncelle
        function updateUI() {
            // Cafe adƒ±
            document.getElementById('cafe-name-welcome').textContent = settings.cafeName || 'Leanor Cafe';
            document.getElementById('cafe-tagline-welcome').textContent = settings.tagline || 'Lezzetin ve Keyifin Adresi';
            document.getElementById('cafe-name').textContent = settings.cafeName || 'Leanor Cafe';
            document.getElementById('cafe-tagline').textContent = settings.tagline || 'Lezzetin ve Keyifin Adresi';
            
            // Kategoriler
            renderCategories();
            
            // √úr√ºnler
            renderProducts();
        }

        // Kategorileri render et
        function renderCategories() {
            const container = document.getElementById('categories');
            
            const allButton = `
                <button onclick="filterCategory('all')" class="px-6 py-2 rounded-full font-semibold whitespace-nowrap ${currentCategory === 'all' ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700'}">
                    T√ºm√º
                </button>
            `;
            
            const categoryButtons = categories.map(cat => `
                <button onclick="filterCategory('${cat.id}')" class="px-6 py-2 rounded-full font-semibold whitespace-nowrap ${currentCategory === cat.id ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700'}">
                    ${cat.icon} ${cat.name}
                </button>
            `).join('');
            
            container.innerHTML = allButton + categoryButtons;
        }

        // √úr√ºnleri render et
        function renderProducts() {
            const grid = document.getElementById('products-grid');
            const emptyState = document.getElementById('empty-state');
            
            let filtered = menuData;
            
            if (currentCategory !== 'all') {
                filtered = menuData.filter(p => p.category === currentCategory);
            }
            
            if (filtered.length === 0) {
                grid.classList.add('hidden');
                emptyState.classList.remove('hidden');
                return;
            }
            
            grid.classList.remove('hidden');
            emptyState.classList.add('hidden');
            
            grid.innerHTML = filtered.map(product => `
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition">
                    ${product.image ? 
                        `<img src="${product.image}" class="w-full h-48 object-cover">` : 
                        `<div class="w-full h-48 bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center text-4xl">${getCategoryIcon(product.category)}</div>`
                    }
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-3">${product.description || ''}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-purple-600">${product.price}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Kategori filtrele
        function filterCategory(categoryId) {
            currentCategory = categoryId;
            renderCategories();
            renderProducts();
        }

        // Kategori ikonu al
        function getCategoryIcon(categoryId) {
            const cat = categories.find(c => c.id === categoryId);
            return cat ? cat.icon : 'üçΩÔ∏è';
        }

        // Men√ºye gir
        function enterMenu() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
        }
    </script>
</body>
</html>
